# til for 2024-12-7

かなり体調回復した！！嬉！！
昨日rails応用半ば無理やり終わらしたのでここから猛スピードで駆け抜けるぞい
乾燥が敵なので加湿器つけてイソジンでうがいしようね


アクティブレコード備忘録

inventories.sizeとinventories.count
動作の違い:
inventories.sizeは、配列やコレクションの要素数を返すメソッドで、内部的には要素のカウントをキャッシュしているから、非常に高速に動作する
inventories.countは、条件を指定して要素をカウントすることもできるメソッド
引数を与えずに使うと、sizeと同じように要素数を返すけど、条件を指定するとその条件に合った要素だけをカウントする
パフォーマンス:
sizeは要素数を取得するために最適化されているから、通常はcountよりも速い
特に大きなコレクションの場合、sizeの方がパフォーマンスが良いことが多い
使用例:
inventories.sizeは単純に要素数を知りたいときに使う
例えば、puts inventories.sizeで在庫の総数を表示できる
inventories.countは、特定の条件を基にカウントしたいときに便利
例えば、inventories.count { |item| item.in_stock? }と書くと、在庫があるアイテムの数をカウントできる


find_byとfindの違い
検索方法:
findは、指定したIDに基づいてレコードを取得するメソッド
例えば、User.find(1)はIDが1のユーザーを返す。見つからない場合は、ActiveRecord::RecordNotFoundエラーが発生する
find_byは、指定した条件に合った最初のレコードを取得するメソッド
例えば、User.find_by(email: 'example@example.com')は、メールアドレスがexample@example.comのユーザーを返す
条件に合うレコードが見つからない場合は、nilが返される
戻り値:
findは必ずレコードを返すかエラーになるため、存在しないIDを指定するとエラーが出る
find_byは、条件に合うレコードが存在しない場合にnilを返すので、エラーにはならない
使用場面:
findは、確実に存在するレコードを取得したいときに使うといい
find_byは、条件に合ったレコードがあれば取得したいときに便利
条件が複数ある場合は、find_byをチェーンして使うこともできる


where("length >= 100")をwhere(:length >= 100)にしてはいけない理由
ActiveRecordのwhereメソッドは、文字列やハッシュを受け取るけど、条件式をそのままシンボルで書くことはできないから、where("length >= 100")のように書く必要がある

group(:film_id)って何をしてるの
group(:film_id)は、データベースのクエリで同じfilm_idを持つレコードをグループ化してる。これを使うと、同じfilm_idのレコードをまとめて、そのグループごとに集計や集約を行うことができる

